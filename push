set -e
if [[ $# -ne 1 ]]; then
    echo "error: include commit message"
    exit 1
fi

# clear
find . -maxdepth 1 -name ".+" -not -name ".git*" | xargs rm -r

# copy 
IFS=$'\r\n'
for dotfile in $(cat targets.txt); do
    cp -r ~/$dotfile .
    echo "including: " '"'"$dotfile"'"'
done

# push
git add -A
git commit -m $1
git push
